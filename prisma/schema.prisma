// This is your Prisma schema file

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Project {
  id              String   @id @default(cuid())
  name            String
  description     String?
  githubUrl       String?
  githubOwner     String?
  githubRepo      String?
  status          String   @default("active") // active, paused, completed, archived
  priority        String   @default("medium") // low, medium, high, critical
  lastCommitDate  DateTime?
  lastCommitSha   String?
  openIssues      Int      @default(0)
  openPRs         Int      @default(0)
  stars           Int      @default(0)
  language        String?
  tags            String?  // JSON array of tags
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  lastSyncedAt    DateTime?

  researchNotes   ResearchNote[]
  activities      Activity[]
}

model ResearchNote {
  id          String   @id @default(cuid())
  projectId   String
  source      String   // genspark, gemini, claude, chatgpt, perplexity, notion, files, other
  title       String
  content     String
  url         String?
  tags        String?  // JSON array of tags
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Activity {
  id          String   @id @default(cuid())
  projectId   String
  type        String   // commit, note, status_change, sync
  description String
  metadata    String?  // JSON metadata
  createdAt   DateTime @default(now())

  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Settings {
  id              String   @id @default("settings")
  githubToken     String?
  githubUsername  String?
  notionToken     String?
  defaultView     String   @default("grid") // grid, list, kanban
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}
